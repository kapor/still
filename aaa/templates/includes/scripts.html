
<script type="text/javascript">

// When the user scrolls down 80px from the top of the document, resize the navbar

window.onscroll = function() {scrollNav()};
function scrollNav() {
  if (document.body.scrollTop > 40 || document.documentElement.scrollTop > 40) {
    document.getElementById("nav_bar").style.margin = "0px 0px";
    document.getElementById("nav_bar").style.boxShadow = "0px 2px .10px #CCC";
    document.getElementById("nav_bar").style.padding="20px 24px";
    document.getElementById("navbar_right").style.lineHeight = "24px";
    document.getElementById("navbar_left").style.lineHeight = "24px";
  } else {
    document.getElementById("nav_bar").style.margin = "0px 0px";
    document.getElementById("nav_bar").style.boxShadow = "0px 0px 0px #CCC";
    document.getElementById("nav_bar").style.padding="20px 32px";
    document.getElementById("navbar_right").style.lineHeight = "48px";
    document.getElementById("navbar_left").style.lineHeight = "48px";
  }
};
</script>




<script type="text/javascript">
/* ++++++++++ LOAD MORE ++++++++++ */


// var _current_item = $('.single_content').length
// console.log(_current_item);
const loadBtn = document.getElementById('loadBtn');
const spinner = document.getElementById('spinner');
const total = JSON.parse(document.getElementById('json-total').textContent);
const alert = document.getElementById('alert');

function loadmorePost() {
    var _current_item = $('.single_content').length
    const content_container = document.getElementById("content");
    $.ajax({
        url: '{% url "load" %}',
        type: 'GET',
        data: {
            'offset': _current_item
        },
        beforeSend: function () {
            loadBtn.classList.add('not_visible');
            spinner.classList.remove('not_visible');
        },
        success: function (response) {
            const data = response.groups
            spinner.classList.add('not_visible')
            data.map(group => {
                console.log(group.name);
                content_container.innerHTML += 
                `<div class="single_content">
                  <h3>${group.name}</h3>
                  <h4>${group.description}</h4>
                </div>`
            })
            if (_current_item == total) {
                alert.classList.remove('not_visible');
            } else {
                loadBtn.classList.remove('not_visible');
            }
        },
        error: function (err) {
            console.log(err);
        },
    });
}
loadBtn.addEventListener('click', () => {
    loadmorePost()
});

</script>


<script type="text/javascript">

/* ++++++++++ SCROL TOP ++++++++++ */

function topFunction() {
  document.body.scrollTop = 0; // For Safari
  document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
} 

</script>

<script type="text/javascript">
/* ++++++++++ DISABLE SCROLLBAR ++++++++++ */

$('.modal_underlay').click(function(){
  $('.body_block').css("overflow", "visible");
  $('body').css("overflow", "visible");
});

$('#modal_close').click(function(){
  $('.body_block').css("overflow", "visible");
  $('body').css("overflow", "visible");
});

$(document).keyup(function(e) {
 if (e.key === "Escape") { 
    $('.body_block').css("overflow", "visible");
    $('body').css("overflow", "visible");
  }
});

$('.modal_button_xsmall').click(function(){
  $('.body_block').css("overflow", "hidden");
  $('body').css("overflow", "hidden");
});

$('#modal_trigger').click(function(){
  $('.body_block').css("overflow", "hidden");
  $('body').css("overflow", "hidden");
});

</script>



<script>
document.addEventListener('keydown', function(event) {
  if (event.keyCode === 27) {
    const modal = document.querySelector('#modal'); // Replace '.modal' with the actual selector of your modal
    if (modal && modal.style.display !== 'none') {
      const closeButton = modal.querySelector('#modal_close'); // Replace '.close-button' with the actual selector of your close button
      if (closeButton) {
        closeButton.click();
      }
    }
  }
});
</script>
